"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[238],{53016:(e,t,r)=>{r.d(t,{Z:()=>l});r(72791);var s=r(2409),a=r(49389),i=r(80184);const l=e=>{let{label:t,name:r,required:l,required_text:n,warning:o}=e;return(0,i.jsx)(s.Z.Item,{label:o?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{children:o})]}):(0,i.jsx)("div",{children:t}),name:r,rules:[{required:l,message:n}],children:(0,i.jsx)(a.default,{})})}},7238:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var s=r(72791),a=r(2409),i=r(50419),l=r(66106),n=r(30914),o=r(87309),d=r(91933),c=r(27169),u=r(29677),m=r(57689),h=r(16030),p=r(77221),x=r(53016),f=r(68747),Z=r(80184);const g={title_uz:"",title_ru:"",dealers:[{title_uz:"",title_ru:""}]},j=()=>{const[e]=a.Z.useForm(),t=(0,m.s0)(),{editId:r}=(0,h.v9)((e=>e.editData)),j=(0,h.I0)(),{mutate:_,data:v,isLoading:b,isSuccess:y}=(0,d.useMutation)((e=>{let{url:t,data:r}=e;return c.Z.postData(t,r)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:S,data:q,refetch:z,isSuccess:F}=(0,d.useQuery)(["edit-region",r],(()=>c.Z.getDataByID("/cars/region",r)),{enabled:!1}),{mutate:w,isLoading:E,data:C,isSuccess:I}=(0,d.useMutation)((e=>{let{url:t,data:r,id:s}=e;return c.Z.editData(t,r,s)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,s.useEffect)((()=>{I&&j({type:p.Pb,payload:""}),(y||I)&&t("/region")}),[v,C]),(0,s.useEffect)((()=>{""!==r&&z()}),[r]),(0,s.useEffect)((()=>{""===r&&e.setFieldsValue(g)}),[]),(0,s.useEffect)((()=>{const t=[];if(null===q||void 0===q||q.dealers.map((e=>{const r={title_uz:e.title_uz,title_ru:e.title_ru};t.push(r)})),F){const r={title_uz:q.title_uz,title_ru:q.title_ru,dealers:t};e.setFieldsValue(r)}}),[q]);return(0,s.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const r=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",r),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",r)}}),[]),(0,Z.jsx)("div",{children:b||S||E?(0,Z.jsx)(u.QP,{}):(0,Z.jsxs)(a.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:g,onFinish:e=>{q?w({url:"/cars/region",data:e,id:r}):_({url:"/cars/region/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Viloyat nomi Uz",name:"title_uz"})}),(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u041f\u0440\u043e\u0432\u0438\u043d\u0446\u0438\u044f Ru",name:"title_ru"})})]}),(0,Z.jsx)(a.Z.List,{name:"dealers",children:(e,t)=>{let{add:r,remove:s}=t;return(0,Z.jsxs)(Z.Fragment,{children:[e.map(((e,t)=>(0,Z.jsxs)("div",{style:{marginBottom:20},children:[(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:11,offset:1,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Dealerni nomini kiriting Uz ".concat(t+1),name:[e.name,"title_uz"]})}),(0,Z.jsx)(n.Z,{span:11,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u0438\u043b\u0435\u0440\u0430 Ru ".concat(t+1),name:[e.name,"title_ru"]})})]}),(0,Z.jsx)(f.Z,{onClick:()=>s(e.name)})]},e.fieldKey))),(0,Z.jsx)(a.Z.Item,{children:(0,Z.jsx)(o.Z,{type:"primary",onClick:()=>r(),block:!0,style:{backgroundColor:"#28a745"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0438\u043b\u0435\u0440\u0430"})})]})}}),(0,Z.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:F?"Edit":"Add"})]})})}},68747:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(1413),a=r(72791);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var l=r(54291),n=function(e,t){return a.createElement(l.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:t,icon:i}))};n.displayName="MinusCircleOutlined";const o=a.forwardRef(n)},30914:(e,t,r)=>{r.d(t,{Z:()=>s});const s=r(89752).Z}}]);
//# sourceMappingURL=238.e92de662.chunk.js.map