"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[6],{53016:(e,t,s)=>{s.d(t,{Z:()=>i});s(72791);var a=s(2409),r=s(49389),l=s(80184);const i=e=>{let{label:t,name:s,required:i,required_text:o}=e;return(0,l.jsx)(a.Z.Item,{label:t,name:s,rules:[{required:i,message:o}],children:(0,l.jsx)(r.default,{})})}},50006:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(72791),r=s(2409),l=s(50419),i=s(66106),o=s(30914),n=s(83734),u=s(87309),d=s(91933),c=s(27169),m=s(29677),p=s(57689),f=s(16030),h=s(77221),Z=s(53016),g=s(80184);const y={title_uz:"",title_ru:"",type:[]},v=()=>{const[e]=r.Z.useForm(),t=(0,p.s0)(),{editId:s}=(0,f.v9)((e=>e.editData)),v=(0,f.I0)(),{data:x,refetch:b}=(0,d.useQuery)("get-types",(()=>c.Z.getData("/cars/types/")),{enabled:!1}),{mutate:j,data:_,isLoading:S,isSuccess:F}=(0,d.useMutation)((e=>{let{url:t,data:s}=e;return c.Z.postData(t,s)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let t in e.response.data)l.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:w,data:E,refetch:I,isSuccess:k}=(0,d.useQuery)(["edit-countries",s],(()=>c.Z.getDataByID("/cars/countries",s)),{enabled:!1}),{mutate:q,isLoading:V,data:D,isSuccess:P}=(0,d.useMutation)((e=>{let{url:t,data:s,id:a}=e;return c.Z.editData(t,s,a)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let t in e.response.data)l.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{P&&v({type:h.Pb,payload:""}),(F||P)&&t("/countries")}),[_,D]),(0,a.useEffect)((()=>{""!==s&&I()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(y),b()}),[]),(0,a.useEffect)((()=>{const t=[];if(k){null===E||void 0===E||E.types.map((e=>{t.push(e.id)})),console.log(E);const s={title_uz:E.title_uz,title_ru:E.title_ru,type:t};e.setFieldsValue(s)}}),[E]);(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]);const z=(0,a.useMemo)((()=>null===x||void 0===x?void 0:x.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[x]);return(0,g.jsx)("div",{children:S||w||V?(0,g.jsx)(m.QP,{}):(0,g.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:y,onFinish:e=>{E?q({url:"/cars/countries",data:e,id:s}):j({url:"/cars/countries/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(i.Z,{gutter:20,children:[(0,g.jsx)(o.Z,{span:12,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"Mamlakat nomini kiritishingiz kerak",label:"Mamlakat nomi Uz",name:"title_uz"})}),(0,g.jsx)(o.Z,{span:12,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0430",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0430 Ru",name:"title_ru"})}),(0,g.jsx)(o.Z,{span:24,children:(0,g.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f\u044b",name:"type",rules:[{required:!0,message:"\u0422\u0438\u043f\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,g.jsx)(n.default,{mode:"multiple",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0442\u0438\u043f\u044b",optionLabelProp:"label",options:z})})})]}),(0,g.jsx)(u.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:k?"Edit":"Add"})]})})}},30914:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(89752).Z}}]);
//# sourceMappingURL=6.b40f5e44.chunk.js.map