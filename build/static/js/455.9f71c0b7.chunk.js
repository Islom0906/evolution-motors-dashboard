"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[455],{53016:(e,r,s)=>{s.d(r,{Z:()=>u});s(72791);var t=s(2409),a=s(49389),n=s(80184);const u=e=>{let{label:r,name:s,required:u,required_text:i}=e;return(0,n.jsx)(t.Z.Item,{label:r,name:s,rules:[{required:u,message:i}],children:(0,n.jsx)(a.default,{})})}},63159:(e,r,s)=>{s.d(r,{Z:()=>u});s(72791);var t=s(2409),a=s(13344),n=s(80184);const u=e=>{let{label:r,name:s,required:u,required_text:i}=e;return(0,n.jsx)(t.Z.Item,{label:r,name:s,rules:[{required:u,message:i}],children:(0,n.jsx)(a.Z,{style:{width:"100%"}})})}},96185:(e,r,s)=>{s.r(r),s.d(r,{default:()=>j});var t=s(72791),a=s(2409),n=s(50419),u=s(66106),i=s(30914),d=s(87309),l=s(91933),o=s(27169),c=s(29677),m=s(57689),h=s(16030),_=s(77221),x=s(53016),Z=s(63159),p=s(49389),g=s(80184);const b=e=>{let{label:r,name:s,required:t,required_text:n}=e;return(0,g.jsx)(a.Z.Item,{label:r,name:s,rules:[{required:t,message:n},{validator:(e,r,s)=>{!r||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?s():s("Please enter a valid email address")}}],children:(0,g.jsx)(p.default,{})})},f={address_uz:"",address_ru:"",phone_number:"",email:"",working_hours_uz:"",working_hours_ru:""},j=()=>{const[e]=a.Z.useForm(),r=(0,m.s0)(),{editId:s}=(0,h.v9)((e=>e.editData)),p=(0,h.I0)(),{mutate:j,data:q,isLoading:w,isSuccess:k}=(0,l.useMutation)((e=>{let{url:r,data:s}=e;return o.Z.postData(r,s)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let r in e.response.data)n.ZP.error("".concat(r,": ").concat(e.response.data[r][0]))}}),{isLoading:v,data:y,refetch:I,isSuccess:S}=(0,l.useQuery)(["edit-contact",s],(()=>o.Z.getDataByID("/about/contact",s)),{enabled:!1}),{mutate:F,isLoading:E,data:z,isSuccess:V}=(0,l.useMutation)((e=>{let{url:r,data:s,id:t}=e;return o.Z.editData(r,s,t)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let r in e.response.data)n.ZP.error("".concat(r,": ").concat(e.response.data[r][0]))}});(0,t.useEffect)((()=>{V&&p({type:_.Pb,payload:""}),(k||V)&&r("/contact")}),[q,z]),(0,t.useEffect)((()=>{""!==s&&I()}),[s]),(0,t.useEffect)((()=>{""===s&&e.setFieldsValue(f)}),[]),(0,t.useEffect)((()=>{if(S){const r={address_uz:y.address_uz,address_ru:y.address_ru,phone_number:y.phone_number,email:y.email,working_hours_uz:y.working_hours_uz,working_hours_ru:y.working_hours_ru};e.setFieldsValue(r)}}),[y]);return(0,t.useEffect)((()=>{const r=JSON.parse(localStorage.getItem("myFormValues"));r&&(r.images=[],e.setFieldsValue(r));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]),(0,g.jsx)("div",{children:w||v||E?(0,g.jsx)(c.QP,{}):(0,g.jsxs)(a.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:f,onFinish:e=>{y?F({url:"/about/contact",data:e,id:s}):j({url:"/about/contact/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(u.Z,{gutter:20,children:[(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"Address kiritish kerak",label:"Address Uz",name:"address_uz"})}),(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0430\u0434\u0440\u0435\u0441",label:"\u0410\u0434\u0440\u0435\u0441 Ru",name:"address_ru"})})]}),(0,g.jsxs)(u.Z,{gutter:20,children:[(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone_number"})}),(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(b,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email"})})]}),(0,g.jsxs)(u.Z,{gutter:20,children:[(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"Ish soatini kiriting",label:"Ish soati",name:"working_hours_uz"})}),(0,g.jsx)(i.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f",label:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f",name:"working_hours_ru"})})]}),(0,g.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:S?"Edit":"Add"})]})})}},30914:(e,r,s)=>{s.d(r,{Z:()=>t});const t=s(89752).Z}}]);
//# sourceMappingURL=455.9f71c0b7.chunk.js.map