"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[662],{53016:(e,t,a)=>{a.d(t,{Z:()=>l});a(72791);var i=a(2409),r=a(49389),s=a(80184);const l=e=>{let{label:t,name:a,required:l,required_text:n}=e;return(0,s.jsx)(i.Z.Item,{label:t,name:a,rules:[{required:l,message:n}],children:(0,s.jsx)(r.default,{})})}},83386:(e,t,a)=>{a.d(t,{Z:()=>l});a(72791);var i=a(2409),r=a(66920),s=a(80184);const l=e=>{let{label:t,name:a,required:l,required_text:n}=e;return(0,s.jsx)(i.Z.Item,{label:t,name:a,rules:[{required:l,message:n}],children:(0,s.jsx)(r.Z,{rows:4})})}},22662:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var i=a(72791),r=a(2409),s=a(50419),l=a(66106),n=a(30914),u=a(93086),d=a(87309),o=a(91933),_=a(27169),m=a(29677),c=a(57689),x=a(16030),p=a(77221),b=a(53016),h=a(83386),g=a(46273),Z=a(80184);const j={title_uz:"",title_ru:"",subtitle_uz:"",subtitle_ru:"",main_title_uz:"",main_title_ru:"",main_text_uz:"",main_text_ru:"",bg_image:[]},z=()=>{const[e]=r.Z.useForm(),t=(0,c.s0)(),{editId:a}=(0,x.v9)((e=>e.editData)),z=(0,x.I0)(),[f,q]=(0,i.useState)([]),{mutate:v,data:y,isLoading:w,isSuccess:F}=(0,o.useMutation)((e=>{let{url:t,data:a}=e;return _.Z.postData(t,a)}),{onSuccess:()=>{s.ZP.success("Success")},onError:e=>{for(let t in e.response.data)s.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:S,data:I,refetch:k,isSuccess:E}=(0,o.useQuery)(["edit-creadit",a],(()=>_.Z.getDataByID("/about/credit-leasing",a)),{enabled:!1}),{mutate:L,isLoading:V,data:D,isSuccess:P}=(0,o.useMutation)((e=>{let{url:t,data:a,id:i}=e;return _.Z.editData(t,a,i)}),{onSuccess:()=>{s.ZP.success("Success")},onError:e=>{for(let t in e.response.data)s.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,i.useEffect)((()=>{P&&z({type:p.Pb,payload:""}),(F||P)&&t("/creadit")}),[y,D]),(0,i.useEffect)((()=>{""!==a&&k()}),[a]),(0,i.useEffect)((()=>{""===a&&e.setFieldsValue(j)}),[]),(0,i.useEffect)((()=>{if(E){const t=[{uid:I.id,name:I.id,status:"done",url:I.bg_image}],a={title_uz:I.title_uz,title_ru:I.title_ru,subtitle_uz:I.subtitle_uz,subtitle_ru:I.subtitle_ru,main_title_uz:I.main_title_uz,main_title_ru:I.main_title_ru,main_text_uz:I.main_text_uz,main_text_ru:I.main_text_ru,bg_image:t};q(t),e.setFieldsValue(a)}}),[I]);(0,i.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);return(0,Z.jsx)("div",{children:w||S||V?(0,Z.jsx)(m.QP,{}):(0,Z.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{var t;const i=new FormData;var r;(i.append("title_uz",e.title_uz),i.append("title_ru",e.title_ru),i.append("subtitle_uz",e.subtitle_uz),i.append("subtitle_ru",e.subtitle_ru),i.append("main_title_uz",e.main_title_uz),i.append("main_title_ru",e.main_title_ru),i.append("main_text_uz",e.main_text_uz),i.append("main_text_ru",e.main_text_ru),null!==(t=f[0])&&void 0!==t&&t.originFileObj)&&i.append("bg_image",null===(r=f[0])||void 0===r?void 0:r.originFileObj);I?L({url:"/about/credit-leasing",data:i,id:a}):v({url:"/about/credit-leasing/",data:i})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(b.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(b.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"Qo'shimcha sarlavha kiritish talab qilinada",label:"Qo'shimcha sarlavha Uz",name:"subtitle_uz"})}),(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 Ru",name:"subtitle_ru"})})]}),(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"Asosiy matn sarlavha kiritish kerak",label:"Asosiy matn sarlavha Uz",name:"main_title_uz"})}),(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c.",label:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 Ru",name:"main_title_ru"})})]}),(0,Z.jsxs)(l.Z,{gutter:20,children:[(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"Asosiy matn kiritish kerak",label:"Asosiy matn Uz",name:"main_text_uz"})}),(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442",label:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 Ru",name:"main_text_ru"})})]}),(0,Z.jsx)(l.Z,{gutter:20,children:(0,Z.jsx)(n.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u043d\u0435\u043c \u043f\u043b\u0430\u043d\u0435",name:"bg_image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435."}],children:(0,Z.jsx)(g.Z,{rotationSlider:!0,children:(0,Z.jsx)(u.Z,{maxCount:1,fileList:f,listType:"picture-card",onChange:t=>{let{fileList:a}=t;q(a),e.setFieldsValue({bg_image:a})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t;const i=window.open(t);null===i||void 0===i||i.document.write(a.outerHTML)},beforeUpload:()=>!1,children:f.length>0?"":"Upload"})})})})}),(0,Z.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:E?"Edit":"Add"})]})})}}}]);
//# sourceMappingURL=662.ce3e6fe2.chunk.js.map