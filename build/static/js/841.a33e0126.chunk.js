"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[841],{53016:(e,t,s)=>{s.d(t,{Z:()=>l});s(72791);var a=s(2409),r=s(49389),i=s(80184);const l=e=>{let{label:t,name:s,required:l,required_text:n,warning:o}=e;return(0,i.jsx)(a.Z.Item,{label:o?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{children:o})]}):(0,i.jsx)("div",{children:t}),name:s,rules:[{required:l,message:n}],children:(0,i.jsx)(r.default,{})})}},38841:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(72791),r=s(2409),i=s(50419),l=s(66106),n=s(30914),o=s(87309),u=s(91933),d=s(27169),c=s(29677),m=s(57689),p=s(16030),f=s(77221),h=s(53016),x=s(80184);const Z={title_uz:"",title_ru:""},g=()=>{const[e]=r.Z.useForm(),t=(0,m.s0)(),{editId:s}=(0,p.v9)((e=>e.editData)),g=(0,p.I0)(),{mutate:y,data:_,isLoading:j,isSuccess:b}=(0,u.useMutation)((e=>{let{url:t,data:s}=e;return d.Z.postData(t,s)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:v,data:F,refetch:S,isSuccess:w}=(0,u.useQuery)(["edit-types",s],(()=>d.Z.getDataByID("/cars/types",s)),{enabled:!1}),{mutate:E,isLoading:I,data:z,isSuccess:V}=(0,u.useMutation)((e=>{let{url:t,data:s,id:a}=e;return d.Z.editData(t,s,a)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{V&&g({type:f.Pb,payload:""}),(b||V)&&t("/types")}),[_,z]),(0,a.useEffect)((()=>{""!==s&&S()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(Z)}),[]),(0,a.useEffect)((()=>{if(w){const t={title_uz:F.title_uz,title_ru:F.title_ru};e.setFieldsValue(t)}}),[F]);return(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]),(0,x.jsx)("div",{children:j||v||I?(0,x.jsx)(c.QP,{}):(0,x.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:Z,onFinish:e=>{const t=new FormData;t.append("title_uz",e.title_uz),t.append("title_ru",e.title_ru),F?E({url:"/cars/types",data:t,id:s}):y({url:"/cars/types/",data:t})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,x.jsxs)(l.Z,{gutter:20,children:[(0,x.jsx)(n.Z,{span:12,children:(0,x.jsx)(h.Z,{required:!0,required_text:"Tur nomini kiritishingiz kerak",label:"Tur nomi Uz",name:"title_uz"})}),(0,x.jsx)(n.Z,{span:12,children:(0,x.jsx)(h.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 Ru",name:"title_ru"})})]}),(0,x.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:w?"Edit":"Add"})]})})}},30914:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(89752).Z}}]);
//# sourceMappingURL=841.a33e0126.chunk.js.map