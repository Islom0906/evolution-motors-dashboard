"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[238],{53016:(e,t,r)=>{r.d(t,{Z:()=>i});r(72791);var s=r(2409),l=r(49389),a=r(80184);const i=e=>{let{label:t,name:r,required:i,required_text:n,warning:d}=e;return(0,a.jsx)(s.Z.Item,{label:d?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:d})]}):(0,a.jsx)("div",{children:t}),name:r,rules:[{required:i,message:n}],children:(0,a.jsx)(l.default,{})})}},63159:(e,t,r)=>{r.d(t,{Z:()=>i});r(72791);var s=r(2409),l=r(13344),a=r(80184);const i=e=>{let{label:t,name:r,required:i,required_text:n}=e;return(0,a.jsx)(s.Z.Item,{label:t,name:r,rules:[{required:i,message:n}],children:(0,a.jsx)(l.Z,{style:{width:"100%"}})})}},7238:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(72791),l=r(521),a=r(2409),i=r(50419),n=r(66106),d=r(30914),o=r(87309),c=r(91933),u=r(27169),m=r(29677),x=r(57689),h=r(16030),j=r(77221),g=r(53016),Z=r(68747),p=r(63159),f=r(80184);const{Title:_}=l.default,y={title_uz:"",title_ru:"",dealers:[{title_uz:"",title_ru:"",dealer_telegram_ids:[{tg_id:null}]}]},b=()=>{const[e]=a.Z.useForm(),t=(0,x.s0)(),{editId:r}=(0,h.v9)((e=>e.editData)),l=(0,h.I0)(),{mutate:b,data:v,isLoading:q,isSuccess:F}=(0,c.useMutation)((e=>{let{url:t,data:r}=e;return u.Z.postData(t,r)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:k,data:S,refetch:I,isSuccess:C}=(0,c.useQuery)(["edit-region",r],(()=>u.Z.getDataByID("/cars/region",r)),{enabled:!1}),{mutate:w,isLoading:z,data:E,isSuccess:V}=(0,c.useMutation)((e=>{let{url:t,data:r,id:s}=e;return u.Z.editData(t,r,s)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,s.useEffect)((()=>{V&&l({type:j.Pb,payload:""}),(F||V)&&t("/region")}),[v,E]),(0,s.useEffect)((()=>{""!==r&&I()}),[r]),(0,s.useEffect)((()=>{""===r&&e.setFieldsValue(y)}),[]),(0,s.useEffect)((()=>{const t=[];if(console.log(S),null===S||void 0===S||S.dealers.map((e=>{const r={title_uz:e.title_uz,title_ru:e.title_ru,dealer_telegram_ids:e.dealer_telegram_ids};t.push(r)})),C){const r={title_uz:S.title_uz,title_ru:S.title_ru,dealers:t};e.setFieldsValue(r)}}),[S]);return(0,s.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const r=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",r),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",r)}}),[]),(0,f.jsx)("div",{children:q||k||z?(0,f.jsx)(m.QP,{}):(0,f.jsxs)(a.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:y,onFinish:e=>{console.log(e),S?w({url:"/cars/region",data:e,id:r}):b({url:"/cars/region/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(d.Z,{span:12,children:(0,f.jsx)(g.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Viloyat nomi Uz",name:"title_uz"})}),(0,f.jsx)(d.Z,{span:12,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u041f\u0440\u043e\u0432\u0438\u043d\u0446\u0438\u044f Ru",name:"title_ru"})})]}),(0,f.jsx)(a.Z.List,{name:"dealers",children:(e,t)=>{let{add:r,remove:s}=t;return(0,f.jsxs)(f.Fragment,{children:[e.map(((e,t)=>(0,f.jsxs)("div",{style:{marginBottom:20},children:[(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(d.Z,{span:11,offset:1,children:(0,f.jsx)(g.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Dealerni nomini kiriting Uz ".concat(t+1),name:[e.name,"title_uz"]})}),(0,f.jsx)(d.Z,{span:11,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u0438\u043b\u0435\u0440\u0430 Ru ".concat(t+1),name:[e.name,"title_ru"]})})]}),(0,f.jsx)(a.Z.List,{name:[e.name,"dealer_telegram_ids"],style:{paddingLeft:"100px"},children:(e,t)=>{let{add:r,remove:s}=t;return(0,f.jsxs)(f.Fragment,{children:[e.map(((e,t)=>(0,f.jsx)("div",{style:{marginBottom:20},children:(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(d.Z,{span:20,offset:2,className:"character-child",children:(0,f.jsx)(p.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0422\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043c\u0435 ".concat(t+1),name:[e.name,"tg_id"]})}),(0,f.jsx)(d.Z,{span:6,offset:2,children:(0,f.jsxs)(_,{level:3,children:[" ",(0,f.jsx)(Z.Z,{onClick:()=>s(e.name)})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0422\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043c\u0435"]})})]})},e.fieldKey))),(0,f.jsx)(n.Z,{children:(0,f.jsx)(d.Z,{offset:2,span:10,children:(0,f.jsx)(a.Z.Item,{children:(0,f.jsx)(o.Z,{type:"primary",onClick:()=>r(),block:!0,style:{backgroundColor:"#1677ff"},children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})})})]})}}),(0,f.jsx)(Z.Z,{onClick:()=>s(e.name)})]},e.fieldKey))),(0,f.jsx)(a.Z.Item,{children:(0,f.jsx)(o.Z,{type:"primary",onClick:()=>r(),block:!0,style:{backgroundColor:"#28a745"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0438\u043b\u0435\u0440\u0430"})})]})}}),(0,f.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:C?"Edit":"Add"})]})})}},30914:(e,t,r)=>{r.d(t,{Z:()=>s});const s=r(89752).Z}}]);
//# sourceMappingURL=238.c177441c.chunk.js.map