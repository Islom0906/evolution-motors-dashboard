"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[991],{53016:(e,t,i)=>{i.d(t,{Z:()=>r});i(72791);var n=i(2409),a=i(49389),s=i(80184);const r=e=>{let{label:t,name:i,required:r,required_text:l,warning:u}=e;return(0,s.jsx)(n.Z.Item,{label:u?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:t}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:u})]}):(0,s.jsx)("div",{children:t}),name:i,rules:[{required:r,message:l}],children:(0,s.jsx)(a.default,{})})}},83386:(e,t,i)=>{i.d(t,{Z:()=>r});i(72791);var n=i(2409),a=i(66920),s=i(80184);const r=e=>{let{label:t,name:i,required:r,required_text:l}=e;return(0,s.jsx)(n.Z.Item,{label:t,name:i,rules:[{required:r,message:l}],children:(0,s.jsx)(a.Z,{rows:4})})}},3991:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var n=i(72791),a=i(521),s=i(2409),r=i(50419),l=i(66106),u=i(30914),o=i(93086),d=i(87309),c=i(91933),m=i(27169),_=i(29677),x=i(57689),g=i(16030),h=i(46273),b=i(68747),Z=i(77221),v=i(53016),j=i(83386),p=i(80184);const{Title:f}=a.default,q={bg_image:[],title_uz:"",title_ru:"",subtitle_uz:"",subtitle_ru:"",main_title_uz:"",main_title_ru:"",insurance_inners:[{content_title_uz:"",content_title_ru:"",content_text_uz:"",content_text_ru:""}]},z=()=>{const[e]=s.Z.useForm(),t=(0,x.s0)(),{editId:i}=(0,g.v9)((e=>e.editData)),a=(0,g.I0)(),[z,y]=(0,n.useState)([]),{mutate:S,data:F,isLoading:w,isSuccess:I}=(0,c.useMutation)((e=>{let{url:t,formData:i}=e;return m.Z.postData(t,i)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{mutate:E,data:k,isLoading:P,isSuccess:D}=(0,c.useMutation)((e=>{let{url:t,data:i}=e;return m.Z.postData(t,i)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:L,data:V,refetch:C,isSuccess:U}=(0,c.useQuery)(["edit-insurance",i],(()=>m.Z.getDataByID("/about/insurance",i)),{enabled:!1}),{mutate:R,isLoading:K,data:M,isSuccess:T}=(0,c.useMutation)((e=>{let{url:t,data:i,id:n}=e;return m.Z.editData(t,i,n)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{mutate:A}=(0,c.useMutation)((e=>{let{url:t,ids:i}=e;return m.Z.deleteImages(t,i)}),{onSuccess:()=>r.ZP.success("Success"),onError:e=>r.ZP.error(e.message)});(0,n.useEffect)((()=>{T&&a({type:Z.Pb,payload:""}),(D||T)&&t("/insurance")}),[k,M]),(0,n.useEffect)((()=>{""!==i&&C()}),[i]),(0,n.useEffect)((()=>{""===i&&e.setFieldsValue(q)}),[]),(0,n.useEffect)((()=>{var t,i,n;const a=[{uid:null===V||void 0===V||null===(t=V.bg_image)||void 0===t?void 0:t.id,name:null===V||void 0===V||null===(i=V.bg_image)||void 0===i?void 0:i.id,status:"done",url:null===V||void 0===V||null===(n=V.bg_image)||void 0===n?void 0:n.image}];if(U){const t={bg_image:a,title_uz:V.title_uz,title_ru:V.title_ru,subtitle_uz:V.subtitle_uz,subtitle_ru:V.subtitle_ru,main_title_uz:V.main_title_uz,main_title_ru:V.main_title_ru,insurance_inners:V.insurance_inners};y(a),e.setFieldsValue(t)}}),[V]);(0,n.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const i=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",i),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",i)}}),[]),(0,n.useEffect)((()=>{if(I){var e,t,i;const n=[{uid:null===F||void 0===F||null===(e=F.images[0])||void 0===e?void 0:e.id,name:null===F||void 0===F||null===(t=F.images[0])||void 0===t?void 0:t.id,status:"done",url:null===F||void 0===F||null===(i=F.images[0])||void 0===i?void 0:i.url}];y(n)}}),[F]);return(0,p.jsx)("div",{children:P||L||K||w?(0,p.jsx)(_.QP,{}):(0,p.jsxs)(s.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:q,onFinish:e=>{var t;const n={title_uz:e.title_uz,title_ru:e.title_ru,subtitle_uz:e.subtitle_uz,subtitle_ru:e.subtitle_ru,main_title_uz:e.main_title_uz,main_title_ru:e.main_title_ru,bg_image:[null===(t=z[0])||void 0===t?void 0:t.uid],insurance_inners:e.insurance_inners};U?R({url:"/about/insurance",data:n,id:i}):E({url:"/about/insurance/",data:n})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,p.jsxs)(l.Z,{gutter:20,children:[(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(v.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(v.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,p.jsxs)(l.Z,{gutter:20,children:[(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"Qo'shimcha sarlavha kiritish talab qilinada",label:"Qo'shimcha sarlavha Uz",name:"subtitle_uz"})}),(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 Ru",name:"subtitle_ru"})})]}),(0,p.jsxs)(l.Z,{gutter:20,children:[(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"Asosiy matn sarlavha kiritish kerak",label:"Asosiy matn Uz",name:"main_title_uz"})}),(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c.",label:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 Ru",name:"main_title_ru"})})]}),(0,p.jsx)(l.Z,{gutter:20,children:(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(s.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439",name:"bg_image",rules:[{required:!0,message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e."}],children:(0,p.jsx)(h.Z,{children:(0,p.jsx)(o.Z,{maxCount:1,fileList:z,listType:"picture-card",onChange:t=>{let{fileList:i}=t;if(e.setFieldsValue({bg_image:i}),0!==z.length||0===i.length){var n;const e=[null===(n=z[0])||void 0===n?void 0:n.uid];A({url:"/delete-images",ids:{image_ids:e}}),y([])}const a=new FormData;0!==i.length&&(a.append("uploaded_images",i[0].originFileObj),S({url:"/about/images/",formData:a}))},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const i=new FileReader;i.readAsDataURL(e.originFileObj),i.onload=()=>t(i.result)})));const i=new Image;i.src=t;const n=window.open(t);null===n||void 0===n||n.document.write(i.outerHTML)},beforeUpload:()=>!1,children:z.length>0?"":"Upload"})})})})}),(0,p.jsx)(f,{level:3,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430"}),(0,p.jsx)(s.Z.List,{name:"insurance_inners",children:(t,i)=>{let{add:n,remove:a}=i;return(0,p.jsxs)(p.Fragment,{children:[t.map(((e,t)=>(0,p.jsxs)("div",{style:{marginBottom:20},children:[(0,p.jsxs)(l.Z,{gutter:20,children:[(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(v.Z,{required:!0,required_text:"Kontent sarlavhasi talab qilinadi",label:"Kontent sarlavhasi Uz ".concat(t+1),name:[e.name,"content_title_uz"]})}),(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(v.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 Ru ".concat(t+1),name:[e.name,"content_title_ru"]})})]}),(0,p.jsxs)(l.Z,{gutter:20,children:[(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"Kontent matn talab qilinadi",label:"Kontent matn Uz ".concat(t+1),name:[e.name,"content_text_uz"]})}),(0,p.jsx)(u.Z,{span:12,children:(0,p.jsx)(j.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",label:"\u0422\u0435\u043a\u0441\u0442 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 Ru ".concat(t+1),name:[e.name,"content_text_ru"]})})]}),(0,p.jsx)(b.Z,{onClick:()=>a(e.name)})]},e.fieldKey))),(0,p.jsx)(s.Z.Item,{children:(0,p.jsx)(d.Z,{type:"primary",onClick:()=>(t=>{let i=[];t();const n=e.getFieldsValue();null!==n&&void 0!==n&&n.insurance_inners[0]||i.push({content_title_uz:"",content_title_ru:"",content_text_uz:"",content_text_ru:""}),e.setFieldsValue({items:i})})(n),block:!0,style:{backgroundColor:"#28a745"},children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442"})})]})}}),(0,p.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:U?"Edit":"Add"})]})})}}}]);
//# sourceMappingURL=991.4580c249.chunk.js.map